<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>今日の行き先リスト</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 1em;
      background: #fff;
      color: #000;
      font-size: 1.3em;
    }
    .next {
      font-size: 3em;
      font-weight: bold;
      margin-bottom: 1em;
      cursor: pointer;
      user-select: none;
    }
    .place {
      border-bottom: 1px solid #000;
      padding: 0.5em;
      margin-bottom: 0;
      cursor: pointer;
      background-color: #BEFFBE;
      user-select: none;
      font-size: 1.5em;
    }
    /* 個別サイズ調整例 */
    .place[data-name="渋谷"] {
      font-size: 2.25em; /* 1.5倍 */
    }
    .place[data-name="新宿"],
    .place[data-name="秋葉原"] {
      font-size: 3em; /* 2段階くらい大きく */
    }

    .edit-controls {
      display: none;
      float: right;
    }
    .edit-mode .edit-controls {
      display: inline-block;
    }
    .edit-mode .place {
      cursor: default;
    }
    .hidden-in-list {
      display: none;
    }
    button {
      margin: 0 0.2em;
      font-size: 1em;
      padding: 0.1em 0.3em;
      cursor: pointer;
    }

    #editToggleBtn {
      position: fixed;
      right: 1em;
      bottom: 1em;
      font-size: 1.2em;
      padding: 0.6em 1em;
      cursor: pointer;
      background: #ddd;
      border: 1px solid #aaa;
      border-radius: 5px;
      user-select: none;
    }

    input[type="checkbox"] {
      width: 1.3em;
      height: 1.3em;
      vertical-align: middle;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="next" id="nextDisplay" tabindex="0" role="button" aria-pressed="false" aria-label="次の行き先を表示">
    Next: -
  </div>

  <div id="places"></div>

  <button id="editToggleBtn" onclick="toggleEdit()">編集モード: OFF</button>

  <script>
    let editing = false;
    let data = [
      { name: "ららぽーと", todos: ["チャージ", "スリーブ購入"], hidden: false },
      { name: "平針", todos: ["ジムバ"], hidden: false },
      { name: "床屋", todos: ["散髪"], hidden: false },
      { name: "三洋堂", todos: ["e-hon", "フリューくじ"], hidden: false },
      { name: "渋谷", todos: ["買い物", "カフェ"], hidden: false },
      { name: "新宿", todos: ["ミーティング", "ランチ"], hidden: false },
      { name: "秋葉原", todos: ["PCパーツ購入", "アニメショップ"], hidden: false }
    ];

    function render() {
      const placesDiv = document.getElementById("places");
      placesDiv.innerHTML = "";

      const visible = data.filter(d => !d.hidden);
      const nextPlace = visible.length ? visible[0] : null;
      const nextName = nextPlace ? nextPlace.name : "-";
      const nextDisplay = document.getElementById("nextDisplay");
      nextDisplay.textContent = `Next: ${nextName}`;
      nextDisplay.setAttribute("aria-label", `次の行き先は${nextName}です。タップすると予定を表示します。`);

      // 下リストはNextの項目は除外
      data.forEach((place, index) => {
        if (place === nextPlace) return; // Nextは下に出さない

        if (!place.hidden) {
          const div = document.createElement("div");
          div.className = "place";
          div.dataset.name = place.name;

          // 編集時はカーソルなし、表示分け
          if (editing) {
            div.style.backgroundColor = "transparent";
            div.style.border = "1px solid #000";
            div.style.marginBottom = "0.5em";
            div.style.fontSize = "1.3em";
            div.style.cursor = "default";
          }

          div.textContent = place.name;

          if (!editing) {
            div.onclick = () => {
              const todosText = place.todos.map(t => `・${t}`).join("\n");
              alert(`${place.name} の予定:\n${todosText}`);
            };
          }

          // 編集モードならチェックと上下ボタンを表示
          if (editing) {
            const controls = document.createElement("span");
            controls.className = "edit-controls";

            const check = document.createElement("input");
            check.type = "checkbox";
            check.checked = place.hidden; // ☑＝非表示, □＝表示
            check.title = check.checked ? "非表示" : "表示";
            check.onchange = () => {
              place.hidden = check.checked;
              render();
            };

            const up = document.createElement("button");
            up.textContent = "↑";
            up.onclick = () => {
              if (index > 0) {
                [data[index - 1], data[index]] = [data[index], data[index - 1]];
                render();
              }
            };

            const down = document.createElement("button");
            down.textContent = "↓";
            down.onclick = () => {
              if (index < data.length - 1) {
                [data[index + 1], data[index]] = [data[index], data[index + 1]];
                render();
              }
            };

            controls.appendChild(check);
            controls.appendChild(up);
            controls.appendChild(down);
            div.appendChild(controls);
          }

          placesDiv.appendChild(div);
        }
      });
    }

    function toggleEdit() {
      editing = !editing;
      const btn = document.getElementById("editToggleBtn");
      btn.textContent = editing ? "編集モード: ON" : "編集モード: OFF";
      document.body.classList.toggle("edit-mode", editing);
      render();
    }

    // Nextタップで予定表示（ポップアップ）
    document.getElementById("nextDisplay").onclick = () => {
      const visible = data.filter(d => !d.hidden);
      if (visible.length === 0) {
        alert("表示中の行き先はありません。");
        return;
      }
      const place = visible[0];
      const todosText = place.todos.map(t => `・${t}`).join("\n");
      alert(`${place.name} の予定:\n${todosText}`);
    };

    render();
  </script>
</body>
</html>
